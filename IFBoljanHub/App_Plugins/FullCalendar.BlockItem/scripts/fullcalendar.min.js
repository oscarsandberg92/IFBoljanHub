/*!
 * FullCalendar v2.1.1
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery","moment"],n):n(jQuery,moment)})(function(n,t){function sr(n,t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function hr(n,t){var i=t.longDateFormat("L");return i=i.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),n.isRTL?i+=" ddd":i="ddd "+i,i}function kt(n){v(y,n)}function v(t){function r(i,r){n.isPlainObject(r)&&n.isPlainObject(t[i])&&!dt(i)?t[i]=v({},t[i],r):r!==undefined&&(t[i]=r)}for(var i=1;i<arguments.length;i++)n.each(arguments[i],r);return t}function dt(n){return/(Time|Duration)$/.test(n)}function lr(r,u){function yt(n){var i=t.localeData||t.langData;return i.call(t,n)||i.call(t,"en")}function kt(n){b?nt()&&(lt(),w(n)):dt()}function dt(){bt=o.theme?"ui":"fc";r.addClass("fc");o.isRTL?r.addClass("fc-rtl"):r.addClass("fc-ltr");o.theme?r.addClass("ui-widget"):r.addClass("fc-unthemed");b=n("<div class='fc-view-container'/>").prependTo(r);p=new ar(e,o);k=p.render();k&&r.prepend(k);ot(o.defaultView);o.handleWindowResize&&(et=ai(ni,o.windowResizeDelay),n(window).resize(et))}function gt(){s&&s.destroy();p.destroy();b.remove();r.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");n(window).unbind("resize",et)}function nt(){return r.is(":visible")}function ot(n){w(0,n)}function w(t,i){g++;s&&i&&s.name!==i&&(p.deactivateButton(s.name),rt(),s.start&&s.destroy(),s.el.remove(),s=null);!s&&i&&(s=new l[i](e),s.el=n("<div class='fc-view fc-"+i+"-view' />").appendTo(b),p.activateButton(i));s&&(t&&(h=s.incrementDate(h,t)),s.start&&!t&&h.isWithin(s.intervalStart,s.intervalEnd)||nt()&&(rt(),s.start&&s.destroy(),s.render(h),ut(),ei(),oi(),ri()));ut();g--}function ct(n){if(nt())return n&&at(),g++,s.updateSize(!0),g--,!0}function lt(){nt()&&at()}function at(){d=typeof o.contentHeight=="number"?o.contentHeight:typeof o.height=="number"?o.height-(k?k.outerHeight(!0):0):Math.round(b.width()/Math.max(o.aspectRatio,.5))}function ni(n){!g&&n.target===window&&s.start&&ct(!0)&&s.trigger("windowResize",st)}function ti(){ii();vt()}function it(){nt()&&(rt(),s.destroyEvents(),s.renderEvents(ht),ut())}function ii(){rt();s.destroyEvents();ut()}function ri(){!o.lazyFetching||pt(s.start,s.end)?vt():it()}function vt(){wt(s.start,s.end)}function ui(n){ht=n;it()}function fi(){it()}function ei(){p.updateTitle(s.title)}function oi(){var n=e.getNow();n.isWithin(s.intervalStart,s.intervalEnd)?p.disableButton("today"):p.enableButton("today")}function si(n,t){n=e.moment(n);t=t?e.moment(t):n.hasTime()?n.clone().add(e.defaultTimedEventDuration):n.clone().add(e.defaultAllDayEventDuration);s.select(n,t)}function hi(){s&&s.unselect()}function ci(){w(-1)}function vi(){w(1)}function yi(){h.add(-1,"years");w()}function wi(){h.add(1,"years");w()}function ki(){h=e.getNow();w()}function di(n){h=e.moment(n);w()}function gi(n){h.add(t.duration(n));w()}function nr(n,t){var r,i;t&&l[t]!==undefined||(t=t||"day",r=p.getViewsWithButtons().join(" "),i=r.match(new RegExp("\\w+"+li(t))),i||(i=r.match(/\w+Day/)),t=i?i[0]:"agendaDay");h=n;ot(t)}function tr(){return h.clone()}function rt(){b.css({width:"100%",height:b.height(),overflow:"hidden"})}function ut(){b.css({width:"",height:"",overflow:""})}function ir(){return e}function rr(){return s}function ur(n,t){if(t===undefined)return o[n];(n=="height"||n=="contentHeight"||n=="aspectRatio")&&(o[n]=t,ct(!0))}function fr(n,t){if(o[n])return o[n].apply(t||st,Array.prototype.slice.call(arguments,2))}var e=this,o,tt,a,ft;u=u||{};o=v({},y,u);tt=o.lang in c?c[o.lang]:c[y.lang];tt&&(o=v({},y,tt,u));o.isRTL&&(o=v({},y,cr,tt||{},u));e.options=o;e.render=kt;e.destroy=gt;e.refetchEvents=ti;e.reportEvents=ui;e.reportEventChange=fi;e.rerenderEvents=it;e.changeView=ot;e.select=si;e.unselect=hi;e.prev=ci;e.next=vi;e.prevYear=yi;e.nextYear=wi;e.today=ki;e.gotoDate=di;e.incrementDate=gi;e.zoomTo=nr;e.getDate=tr;e.getCalendar=ir;e.getView=rr;e.option=ur;e.trigger=fr;a=f(yt(o.lang));o.monthNames&&(a._months=o.monthNames);o.monthNamesShort&&(a._monthsShort=o.monthNamesShort);o.dayNames&&(a._weekdays=o.dayNames);o.dayNamesShort&&(a._weekdaysShort=o.dayNamesShort);o.firstDay!=null&&(ft=f(a._week),ft.dow=o.firstDay,a._week=ft);e.defaultAllDayEventDuration=t.duration(o.defaultAllDayEventDuration);e.defaultTimedEventDuration=t.duration(o.defaultTimedEventDuration);e.moment=function(){var n;return o.timezone==="local"?(n=i.moment.apply(null,arguments),n.hasTime()&&n.local()):n=o.timezone==="UTC"?i.moment.utc.apply(null,arguments):i.moment.parseZone.apply(null,arguments),"_locale"in n?n._locale=a:n._lang=a,n};e.getIsAmbigTimezone=function(){return o.timezone!=="local"&&o.timezone!=="UTC"};e.rezoneDate=function(n){return e.moment(n.toArray())};e.getNow=function(){var n=o.now;return typeof n=="function"&&(n=n()),e.moment(n)};e.calculateWeekNumber=function(n){var t=o.weekNumberCalculation;return typeof t=="function"?t(n):t==="local"?n.week():t.toUpperCase()==="ISO"?n.isoWeek():void 0};e.getEventEnd=function(n){return n.end?n.end.clone():e.getDefaultEventEnd(n.allDay,n.start)};e.getDefaultEventEnd=function(n,t){var i=t.clone();return n?i.stripTime().add(e.defaultAllDayEventDuration):i.add(e.defaultTimedEventDuration),e.getIsAmbigTimezone()&&i.stripZone(),i};e.formatRange=function(n,t,i){return typeof i=="function"&&(i=i.call(e,o,a)),bi(n,t,i,null,o.isRTL)};e.formatDate=function(n,t){return typeof t=="function"&&(t=t.call(e,o,a)),pi(n,t)};vr.call(e,o);var pt=e.isFetchNeeded,wt=e.fetchEvents,st=r[0],p,k,b,bt,s,d,et,g=0,h,ht=[];h=o.defaultDate!=null?e.moment(o.defaultDate):e.getNow();e.getSuggestedViewHeight=function(){return d===undefined&&lt(),d};e.isHeightAuto=function(){return o.contentHeight==="auto"||o.height==="auto"}}function ar(t,i){function h(){var t=i.header;return u=i.theme?"ui":"fc",t?f=n("<div class='fc-toolbar'/>").append(s("left")).append(s("right")).append(s("center")).append('<div class="fc-clear"/>'):void 0}function c(){f.remove()}function s(f){var e=n('<div class="fc-'+f+'"/>'),s=i.header[f];return s&&n.each(s.split(" "),function(){var f=n(),h=!0,s;n.each(this.split(","),function(e,s){var a,v,y,w,p,k,d,c;s=="title"?(f=f.add(n("<h2>&nbsp;<\/h2>")),h=!1):(t[s]?a=function(){t[s]()}:l[s]&&(a=function(){t.changeView(s)},o.push(s)),a&&(v=b(i.themeButtonIcons,s),y=b(i.buttonIcons,s),w=b(i.defaultButtonText,s),p=b(i.buttonText,s),k=p?r(p):v&&i.theme?"<span class='ui-icon ui-icon-"+v+"'><\/span>":y&&!i.theme?"<span class='fc-icon fc-icon-"+y+"'><\/span>":r(w||s),d=["fc-"+s+"-button",u+"-button",u+"-state-default"],c=n('<button type="button" class="'+d.join(" ")+'">'+k+"<\/button>").click(function(){c.hasClass(u+"-state-disabled")||(a(),(c.hasClass(u+"-state-active")||c.hasClass(u+"-state-disabled"))&&c.removeClass(u+"-state-hover"))}).mousedown(function(){c.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-down")}).mouseup(function(){c.removeClass(u+"-state-down")}).hover(function(){c.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-hover")},function(){c.removeClass(u+"-state-hover").removeClass(u+"-state-down")}),f=f.add(c)))});h&&f.first().addClass(u+"-corner-left").end().last().addClass(u+"-corner-right").end();f.length>1?(s=n("<div/>"),h&&s.addClass("fc-button-group"),s.append(f),e.append(s)):e.append(f)}),e}function a(n){f.find("h2").text(n)}function v(n){f.find(".fc-"+n+"-button").addClass(u+"-state-active")}function y(n){f.find(".fc-"+n+"-button").removeClass(u+"-state-active")}function p(n){f.find(".fc-"+n+"-button").attr("disabled","disabled").addClass(u+"-state-disabled")}function w(n){f.find(".fc-"+n+"-button").removeAttr("disabled").removeClass(u+"-state-disabled")}function k(){return o}var e=this,f,o,u;e.render=h;e.destroy=c;e.updateTitle=a;e.activateButton=v;e.deactivateButton=y;e.disableButton=p;e.enableButton=w;e.getViewsWithButtons=k;f=n();o=[]}function vr(t){function ct(n,t){return!e||n.clone().stripZone()<e.clone().stripZone()||t.clone().stripZone()>s.clone().stripZone()}function lt(n,t){var o,r,i;for(e=n,s=t,u=[],o=++l,r=f.length,h=r,i=0;i<r;i++)d(f[i],o)}function d(t,i){nt(t,function(r){var s=n.isArray(t.events),e,f;if(i==l){if(r)for(e=0;e<r.length;e++)f=r[e],s||(f=v(f,t)),f&&u.push(f);h--;h||o(u)}})}function nt(u,f){for(var a=i.sourceFetchers,c,o,v,h=0;h<a.length;h++){if(c=a[h].call(r,u,e.clone(),s.clone(),t.timezone,f),c===!0)return;if(typeof c=="object"){nt(c,f);return}}if(o=u.events,o)n.isFunction(o)?(et(),o.call(r,e.clone(),s.clone(),t.timezone,function(n){f(n);ot()})):n.isArray(o)?f(o):f();else if(v=u.url,v){var b=u.success,k=u.error,d=u.complete,tt=n.isFunction(u.data)?u.data():u.data;var l=n.extend({},tt||{}),y=p(u.startParam,t.startParam),w=p(u.endParam,t.endParam),it=p(u.timezoneParam,t.timezoneParam);y&&(l[y]=e.format());w&&(l[w]=s.format());t.timezone&&t.timezone!="local"&&(l[it]=t.timezone);et();n.ajax(n.extend({},gt,u,{data:l,success:function(t){t=t||[];var i=g(b,this,arguments);n.isArray(i)&&(t=i);f(t)},error:function(){g(k,this,arguments);f()},complete:function(){g(d,this,arguments);ot()}}))}else f()}function at(n){var t=tt(n);t&&(f.push(t),h++,d(t,l))}function tt(t){var e=i.sourceNormalizers,u,f;if(n.isFunction(t)||n.isArray(t)?u={events:t}:typeof t=="string"?u={url:t}:typeof t=="object"&&(u=n.extend({},t)),u){for(u.className?typeof u.className=="string"&&(u.className=u.className.split(/\s+/)):u.className=[],n.isArray(u.events)&&(u.origArray=u.events,u.events=n.map(u.events,function(n){return v(n,u)})),f=0;f<e.length;f++)e[f].call(r,u);return u}}function vt(t){f=n.grep(f,function(n){return!it(n,t)});u=n.grep(u,function(n){return!it(n.source,t)});o(u)}function it(n,t){return n&&t&&ut(n)==ut(t)}function ut(n){return(typeof n=="object"?n.origArray||n.url||n.events:null)||n}function yt(n){n.start=r.moment(n.start);n.end&&(n.end=r.moment(n.end));st(n);pt(n);o(u)}function pt(n){for(var i,r,f,t=0;t<u.length;t++)if(i=u[t],i._id==n._id&&i!==n)for(r=0;r<a.length;r++)f=a[r],n[f]!==undefined&&(i[f]=n[f])}function wt(n,t){var i=v(n);i&&(i.source||(t&&(c.events.push(i),i.source=c),u.push(i)),o(u))}function bt(t){var r,i;for(t==null?t=function(){return!0}:n.isFunction(t)||(r=t+"",t=function(n){return n._id==r}),u=n.grep(u,t,!0),i=0;i<f.length;i++)n.isArray(f[i].events)&&(f[i].events=n.grep(f[i].events,t,!0));o(u)}function ft(t){return n.isFunction(t)?n.grep(u,t):t!=null?(t+="",n.grep(u,function(n){return n._id==t})):u}function et(){b++||y("loading",null,!0,w())}function ot(){--b||y("loading",null,!1,w())}function v(i,u){var e={},o,f,s,h;if(t.eventDataTransform&&(i=t.eventDataTransform(i)),u&&u.eventDataTransform&&(i=u.eventDataTransform(i)),o=r.moment(i.start||i.date),o.isValid())return(f=null,i.end&&(f=r.moment(i.end),!f.isValid()))?void 0:(s=i.allDay,s===undefined&&(h=p(u?u.allDayDefault:undefined,t.allDayDefault),s=h!==undefined?h:!o.hasTime()&&(!f||!f.hasTime())),s?(o.hasTime()&&o.stripTime(),f&&f.hasTime()&&f.stripTime()):(o.hasTime()||(o=r.rezoneDate(o)),f&&!f.hasTime()&&(f=r.rezoneDate(f))),n.extend(e,i),u&&(e.source=u),e._id=i._id||(i.id===undefined?"_fc"+ni++:i.id+""),e.className=i.className?typeof i.className=="string"?i.className.split(/\s+/):i.className:[],e.allDay=s,e.start=o,e.end=f,t.forceEventDuration&&!e.end&&(e.end=ht(e)),rt(e),e)}function st(n,t,i){var e=n._allDay,u=n._start,l=n._end,h=!1,f,o,s,c;return t||i||(t=n.start,i=n.end),f=n.allDay!=e?n.allDay:!(t||i).hasTime(),f&&(t&&(t=t.clone().stripTime()),i&&(i=i.clone().stripTime())),t&&(o=f?k(t,u.clone().stripTime()):k(t,u)),f!=e?h=!0:i&&(s=k(i||r.getDefaultEventEnd(f,t||u),t||u).subtract(k(l||r.getDefaultEventEnd(e,u),u))),c=kt(ft(n._id),h,f,o,s),{dateDelta:o,durationDelta:s,undo:c}}function kt(i,u,f,e,o){var h=r.getIsAmbigTimezone(),s=[];return n.each(i,function(n,i){var y=i._allDay,p=i._start,a=i._end,v=f!=null?f:y,l=p.clone(),c=!u&&a?a.clone():null;v?(l.stripTime(),c&&c.stripTime()):(l.hasTime()||(l=r.rezoneDate(l)),c&&!c.hasTime()&&(c=r.rezoneDate(c)));!c&&(t.forceEventDuration||+o)&&(c=r.getDefaultEventEnd(v,l));l.add(e);c&&c.add(e).add(o);h&&(+e||+o)&&(l.stripZone(),c&&c.stripZone());i.allDay=v;i.start=l;i.end=c;rt(i);s.push(function(){i.allDay=y;i.start=p;i.end=a;rt(i)})}),function(){for(var n=0;n<s.length;n++)s[n]()}}var r=this,a;r.isFetchNeeded=ct;r.fetchEvents=lt;r.addEventSource=at;r.removeEventSource=vt;r.updateEvent=yt;r.renderEvent=wt;r.removeEvents=bt;r.clientEvents=ft;r.mutateEvent=st;var y=r.trigger,w=r.getView,o=r.reportEvents,ht=r.getEventEnd,c={events:[]},f=[c],e,s,l=0,h=0,b=0,u=[];n.each((t.events?[t.events]:[]).concat(t.eventSources||[]),function(n,t){var i=tt(t);i&&f.push(i)});a=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"]}function rt(n){n._allDay=n.allDay;n._start=n.start.clone();n._end=n.end?n.end.clone():null}function ti(n,t){t.left&&n.css({"border-left-width":1,"margin-left":t.left-1});t.right&&n.css({"border-right-width":1,"margin-right":t.right-1})}function ii(n){n.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function ri(t,i,r){var u=Math.floor(i/t.length),e=Math.floor(i-u*(t.length-1)),f=[],o=[],s=[],h=0;ui(t);t.each(function(i,r){var l=i===t.length-1?e:u,c=n(r).outerHeight(!0);c<l?(f.push(r),o.push(c),s.push(n(r).height())):h+=c});r&&(i-=h,u=Math.floor(i/f.length),e=Math.floor(i-u*(f.length-1)));n(f).each(function(t,i){var r=t===f.length-1?e:u,h=o[t],c=s[t],l=r-(h-c);h<r&&n(i).height(l)})}function ui(n){n.height("")}function fi(t){var i=0;return t.find("> *").each(function(t,r){var u=n(r).outerWidth();u>i&&(i=u)}),i++,t.width(i),i}function ei(n,t){return(n.height(t).addClass("fc-scroller"),n[0].scrollHeight-1>n[0].clientHeight)?!0:(ut(n),!1)}function ut(n){n.height("").removeClass("fc-scroller")}function oi(t){var r=t.css("position"),i=t.parents().filter(function(){var t=n(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return r==="fixed"||!i.length?n(t[0].ownerDocument||document):i}function si(n){var t=n.offset().left,u=t+n.width(),i=n.children(),r=i.offset().left,f=r+i.outerWidth();return{left:r-t,right:u-f}}function hi(n){return n.which==1&&!n.ctrlKey}function ci(n,t,i,r){var u,f,e,o;if(t>i&&n<r)return n>=i?(u=n.clone(),e=!0):(u=i.clone(),e=!1),t<=r?(f=t.clone(),o=!0):(f=r.clone(),o=!1),{start:u,end:f,isStart:e,isEnd:o}}function b(n,t){if(n=n||{},n[t]!==undefined)return n[t];for(var u=t.split(/(?=[A-Z])/),i=u.length-1,r;i>=0;i--)if(r=n[u[i].toLowerCase()],r!==undefined)return r;return n["default"]}function k(n,i){return t.duration({days:n.clone().stripTime().diff(i.clone().stripTime(),"days"),ms:n.time()-i.time()})}function yr(n){return Object.prototype.toString.call(n)==="[object Date]"||n instanceof Date}function pr(n,t){return n-t}function f(n){var t=function(){};return t.prototype=n,new t}function wr(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}function g(t,i,r){if(n.isFunction(t)&&(t=[t]),t){for(var f,u=0;u<t.length;u++)f=t[u].apply(i,r)||f;return f}}function p(){for(var n=0;n<arguments.length;n++)if(arguments[n]!==undefined)return arguments[n]}function r(n){return(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function et(n){return n.replace(/&.*?;/g,"")}function li(n){return n.charAt(0).toUpperCase()+n.slice(1)}function ai(n,t){var i,r,u,f,e=function(){var o=+new Date-f;o<t&&o>0?i=setTimeout(e,t-o):(i=null,n.apply(u,r),i||(u=r=null))};return function(){u=this;r=arguments;f=+new Date;i||(i=setTimeout(e,t))}}function nt(i,r,f){var e=i[0],c=i.length==1&&typeof e=="string",h,s,l,o;return t.isMoment(e)?(o=t.apply(null,i),e._ambigTime&&(o._ambigTime=!0),e._ambigZone&&(o._ambigZone=!0)):yr(e)||e===undefined?o=t.apply(null,i):(h=!1,s=!1,c?vi.test(e)?(e+="-01",i=[e],h=!0,s=!0):(l=yi.exec(e))&&(h=!l[5],s=!0):n.isArray(e)&&(s=!0),o=r?t.utc.apply(t,i):t.apply(null,i),h?(o._ambigTime=!0,o._ambigZone=!0):f&&(s?o._ambigZone=!0:c&&o.zone(e))),new u(o)}function u(n){wr(this,n)}function ot(n,t){for(var u=[],f=!1,e=!1,r=0;r<n.length;r++)u.push(i.moment.parseZone(n[r])),f=f||u[r]._ambigTime,e=e||u[r]._ambigZone;for(r=0;r<u.length;r++)f&&!t?u[r].stripTime():e&&u[r].stripZone();return u}function h(n,i){return t.fn.format.call(n,i)}function pi(n,t){return wi(n,gi(t))}function wi(n,t){for(var r="",i=0;i<t.length;i++)r+=ht(n,t[i]);return r}function ht(n,t){var i,r;return typeof t=="string"?t:(i=t.token)?st[i]?st[i](n):h(n,i):t.maybe&&(r=wi(n,t.maybe),r.match(/[1-9]/))?r:""}function bi(n,t,r,u,f){var e;return n=i.moment.parseZone(n),t=i.moment.parseZone(t),e=(n.localeData||n.lang).call(n),r=e.longDateFormat(r)||r,u=u||" - ",br(n,t,gi(r),u,f)}function br(n,t,i,r,u){for(var f,a="",o,l="",s,h="",c="",v="",e=0;e<i.length;e++){if(f=di(n,t,i[e]),f===!1)break;a+=f}for(o=i.length-1;o>e;o--){if(f=di(n,t,i[o]),f===!1)break;l=f+l}for(s=e;s<=o;s++)h+=ht(n,i[s]),c+=ht(t,i[s]);return(h||c)&&(v=u?c+r+h:h+r+c),a+v+l}function di(n,t,i){var r,u;return typeof i=="string"?i:(r=i.token)&&(u=ki[r.charAt(0)],u&&n.isSame(t,u))?h(n,r):!1}function gi(n){return n in tt?tt[n]:tt[n]=nr(n)}function nr(n){for(var i=[],r=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g,t;t=r.exec(n);)t[1]?i.push(t[1]):t[2]?i.push({maybe:nr(t[2])}):t[3]?i.push({token:t[3]}):t[5]&&i.push(t[5]);return i}function tr(n){this.options=n||{}}function ir(n){this.grid=n}function rr(n){this.coordMaps=n}function d(n,t){this.coordMap=n;this.options=t||{}}function kr(n,t){return!n&&!t?!0:n&&t?n.grid===t.grid&&n.row===t.row&&n.col===t.col:!1}function ur(t,i){this.options=i=i||{};this.sourceEl=t;this.parentEl=i.parentEl?n(i.parentEl):t.parent()}function ct(n){this.view=n}function o(n){ct.call(this,n);this.coordMap=new ir(this)}function lt(n,t){return n.eventStartMS-t.eventStartMS||t.eventDurationMS-n.eventDurationMS||t.event.allDay-n.event.allDay||(n.event.title||"").localeCompare(t.event.title)}function w(n){o.call(this,n)}function dr(n,t){for(var r,i=0;i<t.length;i++)if(r=t[i],r.leftCol<=n.rightCol&&r.rightCol>=n.leftCol)return!0;return!1}function gr(n,t){return n.leftCol-t.leftCol}function it(n){o.call(this,n)}function nu(n){var r,i,t;if(n.sort(lt),r=tu(n),iu(r),i=r[0]){for(t=0;t<i.length;t++)fr(i[t]);for(t=0;t<i.length;t++)at(i[t],0,0)}}function tu(n){for(var i=[],u,t,r=0;r<n.length;r++){for(u=n[r],t=0;t<i.length;t++)if(!er(u,i[t]).length)break;u.level=t;(i[t]||(i[t]=[])).push(u)}return i}function iu(n){for(var f,i,r,u,t=0;t<n.length;t++)for(f=n[t],i=0;i<f.length;i++)for(r=f[i],r.forwardSegs=[],u=t+1;u<n.length;u++)er(r,n[u],r.forwardSegs)}function fr(n){var u=n.forwardSegs,i=0,t,r;if(n.forwardPressure===undefined){for(t=0;t<u.length;t++)r=u[t],fr(r),i=Math.max(i,1+r.forwardPressure);n.forwardPressure=i}}function at(n,t,i){var r=n.forwardSegs,u;if(n.forwardCoord===undefined)for(r.length?(r.sort(uu),at(r[0],t+1,i),n.forwardCoord=r[0].backwardCoord):n.forwardCoord=1,n.backwardCoord=n.forwardCoord-(n.forwardCoord-i)/(t+1),u=0;u<r.length;u++)at(r[u],0,n.forwardCoord)}function er(n,t,i){i=i||[];for(var r=0;r<t.length;r++)ru(n,t[r])&&i.push(t[r]);return i}function ru(n,t){return n.bottom>t.top&&n.top<t.bottom}function uu(n,t){return t.forwardPressure-n.forwardPressure||(n.backwardCoord||0)-(t.backwardCoord||0)||lt(n,t)}function e(i){function u(t){var i=w[t];return n.isPlainObject(i)&&!dt(t)?b(i,r.name):i}function y(n,t){return i.trigger.apply(i,[n,t||r].concat(Array.prototype.slice.call(arguments,2),[r]))}function rt(n){var t=n.source||{};return p(n.startEditable,t.startEditable,u("eventStartEditable"),n.editable,t.editable,u("editable"))}function ut(n){var t=n.source||{};return p(n.durationEditable,t.durationEditable,u("eventDurationEditable"),n.editable,t.editable,u("editable"))}function ft(n,t,r,u){var f=i.mutateEvent(t,r,null);y("eventDrop",n,t,f.dateDelta,function(){f.undo();e()},u,{});e()}function et(n,t,r,u){var f=i.mutateEvent(t,null,r);y("eventResize",n,t,f.durationDelta,function(){f.undo();e()},u,{});e()}function ot(n){return t.isMoment(n)&&(n=n.day()),o[n]}function st(){return f}function ht(n,t,i){var r=n.clone();for(t=t||1;o[(r.day()+(i?t:0)+7)%7];)r.add(t,"days");return r}function ct(){var n=g.apply(null,arguments),t=c(n);return nt(t)}function g(n,t){var i=r.colCnt,u=h?-1:1,f=h?i-1:0;return typeof n=="object"&&(t=n.col,n=n.row),n*i+(t*u+f)}function c(n){var t=r.start.day();return n+=s[t],Math.floor(n/f)*7+d[(n%f+f)%f]-t}function nt(n){return r.start.clone().add(n,"days")}function lt(n){var t=l(n),i=a(t);return v(i)}function l(n){return n.clone().stripTime().diff(r.start,"days")}function a(n){var t=r.start.day();return n+=t,Math.floor(n/7)*f+s[(n%7+7)%7]-s[t]}function v(n){var t=r.colCnt,i=h?-1:1,u=h?t-1:0,f=Math.floor(n/t),e=(n%t+t)%t*i+u;return{row:f,col:e}}function at(n,t){for(var b=r.rowCnt,e=r.colCnt,o=[],s=tt(n,t),h=l(s.start),y=l(s.end),k=a(h),d=a(y)-1,i=0;i<b;i++){var p=i*e,g=p+e-1,u=Math.max(k,p),f=Math.min(d,g);if(u<=f){var nt=v(u),it=v(f),w=[nt.col,it.col].sort(),rt=c(u)==h,ut=c(f)+1==y;o.push({row:i,leftCol:w[0],rightCol:w[1],isStart:rt,isEnd:ut})}}return o}function tt(n,t){var r=n.clone().stripTime(),i,u;return t&&(i=t.clone().stripTime(),u=+t.time(),u&&u>=it&&i.add(1,"days")),(!t||i<=r)&&(i=r.clone().add(1,"days")),{start:r,end:i}}function vt(n){var t=tt(n.start,n.end);return t.end.diff(t.start,"days")>1}var r=this;r.calendar=i;r.opt=u;r.trigger=y;r.isEventDraggable=rt;r.isEventResizable=ut;r.eventDrop=ft;r.eventResize=et;var e=i.reportEventChange,w=i.options,it=t.duration(w.nextDayThreshold);r.init();r.getEventTimeText=function(n,t){var r,f;return typeof n=="object"&&typeof t=="object"?(r=n,f=t,t=arguments[2]):(r=n.start,f=n.end),t=t||u("timeFormat"),f&&u("displayEventEnd")?i.formatRange(r,f,t):i.formatDate(r,t)};r.isHiddenDay=ot;r.skipHiddenDays=ht;r.getCellsPerWeek=st;r.dateToCell=lt;r.dateToDayOffset=l;r.dayOffsetToCellOffset=a;r.cellOffsetToCell=v;r.cellToDate=ct;r.cellToCellOffset=g;r.cellOffsetToDayOffset=c;r.dayOffsetToDate=nt;r.rangeToSegments=at;r.isMultiDayEvent=vt;var k=u("hiddenDays")||[],o=[],f,s=[],d=[],h=u("isRTL");(function(){u("weekends")===!1&&k.push(0,6);for(var t=0,i=0;t<7;t++)s[t]=i,o[t]=n.inArray(t,k)!=-1,o[t]||(d[i]=t,i++);if(f=i,!f)throw"invalid hiddenDays";})()}function s(n){e.call(this,n);this.dayGrid=new w(this);this.coordMap=this.dayGrid.coordMap}function vt(n){s.call(this,n)}function yt(n){s.call(this,n)}function pt(n){s.call(this,n)}function fu(n,t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function eu(n,t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}function a(n){e.call(this,n);this.timeGrid=new it(this);this.opt("allDaySlot")?(this.dayGrid=new w(this),this.coordMap=new rr([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap}function wt(n){a.call(this,n)}function bt(n){a.call(this,n)}var y={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:hr,day:"dddd"},timeFormat:{"default":sr},displayEventEnd:{month:!1,basicWeek:!1,"default":!0},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},c={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}},cr={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},i=n.fullCalendar={version:"2.1.1"},l=i.views={},gt,ni,ft,vi,yi,st,ki,tt,or;n.fn.fullCalendar=function(t){var r=Array.prototype.slice.call(arguments,1),i=this;return this.each(function(u,f){var o=n(f),e=o.data("fullCalendar"),s;typeof t=="string"?e&&n.isFunction(e[t])&&(s=e[t].apply(e,r),u||(i=s),t==="destroy"&&o.removeData("fullCalendar")):e||(e=new lr(o,t),o.data("fullCalendar",e),e.render())}),i};i.langs=c;i.datepickerLang=function(t,i,r){var u=c[t];u||(u=c[t]={});v(u,{isRTL:r.isRTL,weekNumberTitle:r.weekHeader,titleFormat:{month:r.showMonthAfterYear?"YYYY["+r.yearSuffix+"] MMMM":"MMMM YYYY["+r.yearSuffix+"]"},defaultButtonText:{prev:et(r.prevText),next:et(r.nextText),today:et(r.currentText)}});n.datepicker&&(n.datepicker.regional[i]=n.datepicker.regional[t]=r,n.datepicker.regional.en=n.datepicker.regional[""],n.datepicker.setDefaults(r))};i.lang=function(n,t){var i;t&&(i=c[n],i||(i=c[n]={}),v(i,t||{}));y.lang=n};i.sourceNormalizers=[];i.sourceFetchers=[];gt={dataType:"json",cache:!1};ni=1;ft=["sun","mon","tue","wed","thu","fri","sat"];i.applyAll=g;vi=/^\s*\d{4}-\d\d$/;yi=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;i.moment=function(){return nt(arguments)};i.moment.utc=function(){var n=nt(arguments,!0);return n.hasTime()&&n.utc(),n};i.moment.parseZone=function(){return nt(arguments,!0,!0)};u.prototype=f(t.fn);u.prototype.clone=function(){return nt([this])};u.prototype.time=function(n){if(n==null)return t.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});delete this._ambigTime;t.isDuration(n)||t.isMoment(n)||(n=t.duration(n));var i=0;return t.isDuration(n)&&(i=Math.floor(n.asDays())*24),this.hours(i+n.hours()).minutes(n.minutes()).seconds(n.seconds()).milliseconds(n.milliseconds())};u.prototype.stripTime=function(){var n=this.toArray();return t.fn.utc.call(this),this.year(n[0]).month(n[1]).date(n[2]).hours(0).minutes(0).seconds(0).milliseconds(0),this._ambigTime=!0,this._ambigZone=!0,this};u.prototype.hasTime=function(){return!this._ambigTime};u.prototype.stripZone=function(){var n=this.toArray(),i=this._ambigTime;return t.fn.utc.call(this),this.year(n[0]).month(n[1]).date(n[2]).hours(n[3]).minutes(n[4]).seconds(n[5]).milliseconds(n[6]),i&&(this._ambigTime=!0),this._ambigZone=!0,this};u.prototype.hasZone=function(){return!this._ambigZone};u.prototype.zone=function(n){return n!=null&&(delete this._ambigTime,delete this._ambigZone),t.fn.zone.apply(this,arguments)};u.prototype.local=function(){var n=this.toArray(),i=this._ambigZone;return delete this._ambigTime,delete this._ambigZone,t.fn.local.apply(this,arguments),i&&this.year(n[0]).month(n[1]).date(n[2]).hours(n[3]).minutes(n[4]).seconds(n[5]).milliseconds(n[6]),this};u.prototype.utc=function(){return delete this._ambigTime,delete this._ambigZone,t.fn.utc.apply(this,arguments)};u.prototype.format=function(){return arguments[0]?pi(this,arguments[0]):this._ambigTime?h(this,"YYYY-MM-DD"):this._ambigZone?h(this,"YYYY-MM-DD[T]HH:mm:ss"):h(this)};u.prototype.toISOString=function(){return this._ambigTime?h(this,"YYYY-MM-DD"):this._ambigZone?h(this,"YYYY-MM-DD[T]HH:mm:ss"):t.fn.toISOString.apply(this,arguments)};u.prototype.isWithin=function(n,t){var i=ot([this,n,t]);return i[0]>=i[1]&&i[0]<i[2]};u.prototype.isSame=function(n,r){var u;return r?(u=ot([this,n],!0),t.fn.isSame.call(u[0],u[1],r)):(n=i.moment.parseZone(n),t.fn.isSame.call(this,n)&&Boolean(this._ambigTime)===Boolean(n._ambigTime)&&Boolean(this._ambigZone)===Boolean(n._ambigZone))};n.each(["isBefore","isAfter"],function(n,i){u.prototype[i]=function(n,r){var u=ot([this,n]);return t.fn[i].call(u[0],u[1],r)}});st={t:function(n){return h(n,"a").charAt(0)},T:function(n){return h(n,"A").charAt(0)}};i.formatRange=bi;ki={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};tt={};tr.prototype={isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var i=this,t=this.options;this.el=n('<div class="fc-popover"/>').addClass(t.className||"").css({top:0,left:0}).append(t.content).appendTo(t.parentEl);this.el.on("click",".fc-close",function(){i.hide()});if(t.autoHide)n(document).on("mousedown",this.documentMousedownProxy=n.proxy(this,"documentMousedown"))},documentMousedown:function(t){this.el&&!n(t.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide();this.el&&(this.el.remove(),this.el=null);n(document).off("mousedown",this.documentMousedownProxy)},position:function(){var t=this.options,h=this.el.offsetParent().offset(),c=this.el.outerWidth(),l=this.el.outerHeight(),o=n(window),i=oi(this.el),f,e,s,r,u;r=t.top||0;u=t.left!==undefined?t.left:t.right!==undefined?t.right-c:0;i.is(window)||i.is(document)?(i=o,f=0,e=0):(s=i.offset(),f=s.top,e=s.left);f+=o.scrollTop();e+=o.scrollLeft();t.viewportConstrain!==!1&&(r=Math.min(r,f+i.outerHeight()-l-this.margin),r=Math.max(r,f+this.margin),u=Math.min(u,e+i.outerWidth()-c-this.margin),u=Math.max(u,e+this.margin));this.el.css({top:r-h.top,left:u-h.left})},trigger:function(n){this.options[n]&&this.options[n].apply(this,Array.prototype.slice.call(arguments,1))}};ir.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]);this.computeBounds()},getCell:function(n,t){var r=null,u=this.rows,f=this.cols,e=-1,o=-1,i;if(this.inBounds(n,t)){for(i=0;i<u.length;i++)if(t>=u[i][0]&&t<u[i][1]){e=i;break}for(i=0;i<f.length;i++)if(n>=f[i][0]&&n<f[i][1]){o=i;break}e>=0&&o>=0&&(r={row:e,col:o},r.grid=this.grid,r.date=this.grid.getCellDate(r))}return r},computeBounds:function(){var n;this.containerEl&&(n=this.containerEl.offset(),this.minX=n.left,this.maxX=n.left+this.containerEl.outerWidth(),this.minY=n.top,this.maxY=n.top+this.containerEl.outerHeight())},inBounds:function(n,t){return this.containerEl?n>=this.minX&&n<this.maxX&&t>=this.minY&&t<this.maxY:!0}};rr.prototype={coordMaps:null,build:function(){for(var t=this.coordMaps,n=0;n<t.length;n++)t[n].build()},getCell:function(n,t){for(var u=this.coordMaps,r=null,i=0;i<u.length&&!r;i++)r=u[i].getCell(n,t);return r}};d.prototype={coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(n){hi(n)&&(n.preventDefault(),this.startListening(n),this.options.distance||this.startDrag(n))},startListening:function(t){var i,r;if(!this.isListening){if(t&&this.options.scroll&&(i=oi(n(t.target)),!i.is(window)&&!i.is(document))){this.scrollEl=i;this.scrollHandlerProxy=ai(n.proxy(this,"scrollHandler"),100);this.scrollEl.on("scroll",this.scrollHandlerProxy)}this.computeCoords();t&&(r=this.getCell(t),this.origCell=r,this.origDate=r?r.date:null,this.mouseX0=t.pageX,this.mouseY0=t.pageY);n(document).on("mousemove",this.mousemoveProxy=n.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=n.proxy(this,"mouseup")).on("selectstart",this.preventDefault);this.isListening=!0;this.trigger("listenStart",t)}},computeCoords:function(){this.coordMap.build();this.computeScrollBounds()},mousemove:function(n){var t,i;this.isDragging||(t=this.options.distance||1,i=Math.pow(n.pageX-this.mouseX0,2)+Math.pow(n.pageY-this.mouseY0,2),i>=t*t&&this.startDrag(n));this.isDragging&&this.drag(n)},startDrag:function(n){var t;this.isListening||this.startListening();this.isDragging||(this.isDragging=!0,this.trigger("dragStart",n),t=this.getCell(n),t&&this.cellOver(t,!0))},drag:function(n){var t;this.isDragging&&(t=this.getCell(n),kr(t,this.cell)||(this.cell&&this.cellOut(),t&&this.cellOver(t)),this.dragScroll(n))},cellOver:function(n){this.cell=n;this.date=n.date;this.trigger("cellOver",n,n.date)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null,this.date=null)},mouseup:function(n){this.stopDrag(n);this.stopListening(n)},stopDrag:function(n){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",n),this.isDragging=!1)},stopListening:function(t){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),n(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",t),this.origCell=this.cell=null,this.origDate=this.date=null)},getCell:function(n){return this.coordMap.getCell(n.pageX,n.pageY)},trigger:function(n){this.options[n]&&this.options[n].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(n){n.preventDefault()},computeScrollBounds:function(){var t=this.scrollEl,n;t&&(n=t.offset(),this.scrollBounds={top:n.top,left:n.left,bottom:n.top+t.outerHeight(),right:n.left+t.outerWidth()})},dragScroll:function(n){var t=this.scrollSensitivity,i=this.scrollBounds,r,u,f,e,o=0,s=0;i&&(r=(t-(n.pageY-i.top))/t,u=(t-(i.bottom-n.pageY))/t,f=(t-(n.pageX-i.left))/t,e=(t-(i.right-n.pageX))/t,r>=0&&r<=1?o=r*this.scrollSpeed*-1:u>=0&&u<=1&&(o=u*this.scrollSpeed),f>=0&&f<=1?s=f*this.scrollSpeed*-1:e>=0&&e<=1&&(s=e*this.scrollSpeed));this.setScrollVel(o,s)},setScrollVel:function(t,i){this.scrollTopVel=t;this.scrollLeftVel=i;this.constrainScrollVel();(this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId&&(this.scrollIntervalId=setInterval(n.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var n=this.scrollEl;this.scrollTopVel<0?n.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&n.scrollTop()+n[0].clientHeight>=n[0].scrollHeight&&(this.scrollTopVel=0);this.scrollLeftVel<0?n.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&n.scrollLeft()+n[0].clientWidth>=n[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var n=this.scrollEl,t=this.scrollIntervalMs/1e3;this.scrollTopVel&&n.scrollTop(n.scrollTop()+this.scrollTopVel*t);this.scrollLeftVel&&n.scrollLeft(n.scrollLeft()+this.scrollLeftVel*t);this.constrainScrollVel();this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}};ur.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,start:function(t){if(!this.isFollowing){this.isFollowing=!0;this.mouseY0=t.pageY;this.mouseX0=t.pageX;this.topDelta=0;this.leftDelta=0;this.isHidden||this.updatePosition();n(document).on("mousemove",this.mousemoveProxy=n.proxy(this,"mousemove"))}},stop:function(t,i){function u(){this.isAnimating=!1;f.destroyEl();this.top0=this.left0=null;i&&i()}var f=this,r=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,n(document).off("mousemove",this.mousemoveProxy),t&&r&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:r,complete:u})):u())},getEl:function(){var n=this.el;return n||(this.sourceEl.width(),n=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),n},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var n,t;this.getEl();this.top0===null&&(this.sourceEl.width(),n=this.sourceEl.offset(),t=this.el.offsetParent().offset(),this.top0=n.top-t.top,this.left0=n.left-t.left);this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(n){this.topDelta=n.pageY-this.mouseY0;this.leftDelta=n.pageX-this.mouseX0;this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}};ct.prototype={view:null,cellHtml:"<td/>",rowHtml:function(n,t){var u=this.view,e=this.getHtmlRenderer("cell",n),r="",i,f;for(t=t||0,i=0;i<u.colCnt;i++)f=u.cellToDate(t,i),r+=e(t,i,f);return r=this.bookendCells(r,n,t),"<tr>"+r+"<\/tr>"},bookendCells:function(n,t,i){var s=this.view,r=this.getHtmlRenderer("intro",t)(i||0),u=this.getHtmlRenderer("outro",t)(i||0),f=s.opt("isRTL"),e=f?u:r,o=f?r:u;return typeof n=="string"?e+n+o:n.prepend(e).append(o)},getHtmlRenderer:function(n,t){var f=this.view,e,r,u,i;return(e=n+"Html",t&&(r=t+li(n)+"Html"),r&&(i=f[r])?u=f:r&&(i=this[r])?u=this:(i=f[e])?u=f:(i=this[e])&&(u=this),typeof i=="function")?function(){return i.apply(u,arguments)||""}:function(){return i||""}}};o.prototype=f(ct.prototype);n.extend(o.prototype,{el:null,coordMap:null,cellDuration:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(){},getCellDate:function(){},getCellDayEl:function(){},rangeToSegs:function(){},bindHandlers:function(){var t=this;this.el.on("mousedown",function(i){n(i.target).is(".fc-event-container *, .fc-more")||n(i.target).closest(".fc-popover").length||t.dayMousedown(i)});this.bindSegHandlers()},dayMousedown:function(n){var r=this,i=this.view,o=i.opt("selectable"),t=null,u,f,s,e=new d(this.coordMap,{scroll:i.opt("dragScroll"),dragStart:function(){i.unselect()},cellOver:function(n,i){e.origDate&&(s=r.getCellDayEl(n),t=[i,e.origDate].sort(pr),u=t[0],f=t[1].clone().add(r.cellDuration),o&&r.renderSelection(u,f))},cellOut:function(){t=null;r.destroySelection()},listenStop:function(n){t&&(t[0].isSame(t[1])&&i.trigger("dayClick",s[0],u,n),o&&i.reportSelection(u,f,n))}});e.mousedown(n)},renderDrag:function(){},destroyDrag:function(){},renderResize:function(){},destroyResize:function(){},renderRangeHelper:function(n,t,i){var u=this.view,r;!t&&u.opt("forceEventDuration")&&(t=u.calendar.getDefaultEventEnd(!n.hasTime(),n));r=i?f(i.event):{};r.start=n;r.end=t;r.allDay=!(n.hasTime()||t&&t.hasTime());r.className=(r.className||[]).concat("fc-helper");i||(r.editable=!1);this.renderHelper(r,i)},renderHelper:function(){},destroyHelper:function(){},renderSelection:function(n,t){this.renderHighlight(n,t)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(){},destroyHighlight:function(){},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"<\/thead><\/table><\/div>"},headCellHtml:function(n,t,i){var u=this.view,f=u.calendar,e=u.opt("columnFormat");return'<th class="fc-day-header '+u.widgetHeaderClass+" fc-"+ft[i.day()]+'">'+r(f.formatDate(i,e))+"<\/th>"},bgCellHtml:function(n,t,i){var u=this.view,r=this.getDayClasses(i);return r.unshift("fc-day",u.widgetContentClass),'<td class="'+r.join(" ")+'" data-date="'+i.format()+'"><\/td>'},getDayClasses:function(n){var i=this.view,r=i.calendar.getNow().stripTime(),t=["fc-"+ft[n.day()]];return i.name==="month"&&n.month()!=i.intervalStart.month()&&t.push("fc-other-month"),n.isSame(r,"day")?t.push("fc-today",i.highlightStateClass):n<r?t.push("fc-past"):t.push("fc-future"),t}});n.extend(o.prototype,{mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,renderEvents:function(){},getSegs:function(){},destroyEvents:function(){this.triggerSegMouseout()},renderSegs:function(t,i){for(var e=this.view,u="",f=[],r=0;r<t.length;r++)u+=this.renderSegHtml(t[r],i);return n(u).each(function(i,r){var u=t[i],o=e.resolveEventEl(u.event,n(r));o&&(o.data("fc-seg",u),u.el=o,f.push(u))}),f},renderSegHtml:function(){},eventsToSegs:function(t,i,r){var u=this;return n.map(t,function(n){return u.eventToSegs(n,i,r)})},eventToSegs:function(n,t,i){var f=n.start.clone().stripZone(),o=this.view.calendar.getEventEnd(n).stripZone(),u,e,r;for(t&&i?(r=ci(f,o,t,i),u=r?[r]:[]):u=this.rangeToSegs(f,o),e=0;e<u.length;e++)r=u[e],r.event=n,r.eventStartMS=+f,r.eventDurationMS=o-f;return u},bindSegHandlers:function(){var t=this,i=this.view;n.each({mouseenter:function(n,i){t.triggerSegMouseover(n,i)},mouseleave:function(n,i){t.triggerSegMouseout(n,i)},click:function(n,t){return i.trigger("eventClick",this,n.event,t)},mousedown:function(r,u){n(u.target).is(".fc-resizer")&&i.isEventResizable(r.event)?t.segResizeMousedown(r,u):i.isEventDraggable(r.event)&&t.segDragMousedown(r,u)}},function(i,r){t.el.on(i,".fc-event-container > *",function(i){var u=n(this).data("fc-seg");if(u&&!t.isDraggingSeg&&!t.isResizingSeg)return r.call(this,u,i)})})},triggerSegMouseover:function(n,t){this.mousedOverSeg||(this.mousedOverSeg=n,this.view.trigger("eventMouseover",n.el[0],n.event,t))},triggerSegMouseout:function(n,t){t=t||{};this.mousedOverSeg&&(n=n||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",n.el[0],n.event,t))},segDragMousedown:function(n,t){var e=this,i=this.view,o=n.el,u=n.event,f,s,r=new ur(n.el,{parentEl:i.el,opacity:i.opt("dragOpacity"),revertDuration:i.opt("dragRevertDuration"),zIndex:2}),h=new d(i.coordMap,{distance:5,scroll:i.opt("dragScroll"),listenStart:function(n){r.hide();r.start(n)},dragStart:function(t){e.triggerSegMouseout(n,t);e.isDraggingSeg=!0;i.hideEvent(u);i.trigger("eventDragStart",o[0],u,t,{})},cellOver:function(t,u){var c=n.cellDate||h.origDate,o=e.computeDraggedEventDates(n,c,u);f=o.start;s=o.end;i.renderDrag(f,s,n)?r.hide():r.show()},cellOut:function(){f=null;i.destroyDrag();r.show()},dragStop:function(n){var t=f&&!f.isSame(u.start);r.stop(!t,function(){e.isDraggingSeg=!1;i.destroyDrag();i.showEvent(u);i.trigger("eventDragStop",o[0],u,n,{});t&&i.eventDrop(o[0],u,f,n)})},listenStop:function(){r.stop()}});h.mousedown(t)},computeDraggedEventDates:function(n,t,i){var o=this.view,r=n.event,s=r.start,h=o.calendar.getEventEnd(r),u,f,e;return i.hasTime()===t.hasTime()?(u=k(i,t),f=s.clone().add(u),e=r.end===null?null:h.clone().add(u)):(f=i,e=null),{start:f,end:e}},segResizeMousedown:function(n,t){function s(){f.destroyResize();i.showEvent(r)}var f=this,i=this.view,e=n.el,r=n.event,o=r.start,c=i.calendar.getEventEnd(r),u=null,h;h=new d(this.coordMap,{distance:5,scroll:i.opt("dragScroll"),dragStart:function(t){f.triggerSegMouseout(n,t);f.isResizingSeg=!0;i.trigger("eventResizeStart",e[0],r,t,{})},cellOver:function(t,e){e.isBefore(o)&&(e=o);u=e.clone().add(f.cellDuration);u.isSame(c)?(u=null,s()):(f.renderResize(o,u,n),i.hideEvent(r))},cellOut:function(){u=null;s()},dragStop:function(n){f.isResizingSeg=!1;s();i.trigger("eventResizeStop",e[0],r,n,{});u&&i.eventResize(e[0],r,u,n)}});h.mousedown(t)},getSegClasses:function(n,t,i){var r=n.event,u=["fc-event",n.isStart?"fc-start":"fc-not-start",n.isEnd?"fc-end":"fc-not-end"].concat(r.className,r.source?r.source.className:[]);return t&&u.push("fc-draggable"),i&&u.push("fc-resizable"),u},getEventSkinCss:function(n){var t=this.view,i=n.source||{},u=n.color,f=i.color,e=t.opt("eventColor"),o=n.backgroundColor||u||i.backgroundColor||f||t.opt("eventBackgroundColor")||e,s=n.borderColor||u||i.borderColor||f||t.opt("eventBorderColor")||e,h=n.textColor||i.textColor||t.opt("eventTextColor"),r=[];return o&&r.push("background-color:"+o),s&&r.push("border-color:"+s),h&&r.push("color:"+h),r.join(";")}});w.prototype=f(o.prototype);n.extend(w.prototype,{numbersVisible:!1,cellDuration:t.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,highlightEls:null,render:function(t){for(var i=this.view,u="",r=0;r<i.rowCnt;r++)u+=this.dayRowHtml(r,t);this.el.html(u);this.rowEls=this.el.find(".fc-row");this.dayEls=this.el.find(".fc-day");this.dayEls.each(function(t,r){var u=i.cellToDate(Math.floor(t/i.colCnt),t%i.colCnt);i.trigger("dayRender",null,u,n(r))});o.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(n,t){var r=this.view,i=["fc-row","fc-week",r.widgetContentClass];return t&&i.push("fc-rigid"),'<div class="'+i.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",n)+'<\/table><\/div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",n)+"<\/thead>":"")+"<\/table><\/div><\/div>"},dayCellHtml:function(n,t,i){return this.bgCellHtml(n,t,i)},buildCoords:function(t,i){var e=this.view.colCnt,f,r,u;this.dayEls.slice(0,e).each(function(t,e){f=n(e);r=f.offset().left;t&&(u[1]=r);u=[r];i[t]=u});u[1]=r+f.outerWidth();this.rowEls.each(function(i,e){f=n(e);r=f.offset().top;i&&(u[1]=r);u=[r];t[i]=u});u[1]=r+f.outerHeight()+this.bottomCoordPadding},getCellDate:function(n){return this.view.cellToDate(n)},getCellDayEl:function(n){return this.dayEls.eq(n.row*this.view.colCnt+n.col)},rangeToSegs:function(n,t){return this.view.rangeToSegments(n,t)},renderDrag:function(n,t,i){var r;return this.renderHighlight(n,t||this.view.calendar.getDefaultEventEnd(!0,n)),i&&!i.el.closest(this.el).length?(this.renderRangeHelper(n,t,i),r=this.view.opt("dragOpacity"),r!==undefined&&this.helperEls.css("opacity",r),!0):void 0},destroyDrag:function(){this.destroyHighlight();this.destroyHelper()},renderResize:function(n,t,i){this.renderHighlight(n,t);this.renderRangeHelper(n,t,i)},destroyResize:function(){this.destroyHighlight();this.destroyHelper()},renderHelper:function(t,i){var r=[],u=this.renderEventRows([t]);this.rowEls.each(function(t,f){var o=n(f),e=n('<div class="fc-helper-skeleton"><table/><\/div>'),s;s=i&&i.row===t?i.el.position().top:o.find(".fc-content-skeleton tbody").position().top;e.css("top",s).find("table").append(u[t].tbodyEl);o.append(e);r.push(e[0])});this.helperEls=n(r)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},renderHighlight:function(t,i){for(var e=this.rangeToSegs(t,i),o=[],u,f,r=0;r<e.length;r++)u=e[r],f=n(this.highlightSkeletonHtml(u.leftCol,u.rightCol+1)),f.appendTo(this.rowEls[u.row]),o.push(f[0]);this.highlightEls=n(o)},destroyHighlight:function(){this.highlightEls&&(this.highlightEls.remove(),this.highlightEls=null)},highlightSkeletonHtml:function(n,t){var r=this.view.colCnt,i="";return n>0&&(i+='<td colspan="'+n+'"/>'),t>n&&(i+='<td colspan="'+(t-n)+'" class="fc-highlight" />'),r>t&&(i+='<td colspan="'+(r-t)+'"/>'),i=this.bookendCells(i,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+i+"<\/tr><\/table><\/div>"}});n.extend(w.prototype,{segs:null,rowStructs:null,renderEvents:function(t){var r=this.rowStructs=this.renderEventRows(t),i=[];this.rowEls.each(function(t,u){n(u).find(".fc-content-skeleton > table").append(r[t].tbodyEl);i.push.apply(i,r[t].segs)});this.segs=i},getSegs:function(){return(this.segs||[]).concat(this.popoverSegs||[])},destroyEvents:function(){var n,t;for(o.prototype.destroyEvents.call(this),n=this.rowStructs||[];t=n.pop();)t.tbodyEl.remove();this.segs=null;this.destroySegPopover()},renderEventRows:function(n){var i=this.eventsToSegs(n),u=[],r,t;for(i=this.renderSegs(i),r=this.groupSegRows(i),t=0;t<r.length;t++)u.push(this.renderEventRow(t,r[t]));return u},renderSegHtml:function(n,t){var u=this.view,c=u.opt("isRTL"),i=n.event,l=u.isEventDraggable(i),o=!t&&i.allDay&&n.isEnd&&u.isEventResizable(i),s=this.getSegClasses(n,l,o),h=this.getEventSkinCss(i),f="",e;return s.unshift("fc-day-grid-event"),!i.allDay&&n.isStart&&(f='<span class="fc-time">'+r(u.getEventTimeText(i))+"<\/span>"),e='<span class="fc-title">'+(r(i.title||"")||"&nbsp;")+"<\/span>",'<a class="'+s.join(" ")+'"'+(i.url?' href="'+r(i.url)+'"':"")+(h?' style="'+h+'"':"")+'><div class="fc-content">'+(c?e+" "+f:f+" "+e)+"<\/div>"+(o?'<div class="fc-resizer"/>':"")+"<\/a>"},renderEventRow:function(t,i){function p(t){while(u<t)r=(h[f-1]||[])[u],r?r.attr("rowspan",parseInt(r.attr("rowspan")||1,10)+1):(r=n("<td/>"),o.append(r)),s[f][u]=r,h[f][u]=r,u++}for(var w=this.view,b=w.colCnt,a=this.buildSegLevels(i),k=Math.max(1,a.length),y=n("<tbody/>"),v=[],s=[],h=[],c,u,o,l,e,r,f=0;f<k;f++){if(c=a[f],u=0,o=n("<tr/>"),v.push([]),s.push([]),h.push([]),c)for(l=0;l<c.length;l++){for(e=c[l],p(e.leftCol),r=n('<td class="fc-event-container"/>').append(e.el),e.leftCol!=e.rightCol?r.attr("colspan",e.rightCol-e.leftCol+1):h[f][u]=r;u<=e.rightCol;)s[f][u]=r,v[f][u]=e,u++;o.append(r)}p(b);this.bookendCells(o,"eventSkeleton");y.append(o)}return{row:t,tbodyEl:y,cellMatrix:s,segMatrix:v,segLevels:a,segs:i}},buildSegLevels:function(n){var i=[],r,u,t;for(n.sort(lt),r=0;r<n.length;r++){for(u=n[r],t=0;t<i.length;t++)if(!dr(u,i[t]))break;u.level=t;(i[t]||(i[t]=[])).push(u)}for(t=0;t<i.length;t++)i[t].sort(gr);return i},groupSegRows:function(n){for(var r=this.view,i=[],t=0;t<r.rowCnt;t++)i.push([]);for(t=0;t<n.length;t++)i[n[t].row].push(n[t]);return i}});n.extend(w.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(n){for(var r=this.rowStructs||[],i,t=0;t<r.length;t++)this.unlimitRow(t),i=n?typeof n=="number"?n:this.computeRowLevelLimit(t):!1,i!==!1&&this.limitRow(t,i)},computeRowLevelLimit:function(n){for(var u=this.rowEls.eq(n),f=u.height(),r=this.rowStructs[n].tbodyEl.children(),i,t=0;t<r.length;t++)if(i=r.eq(t).removeClass("fc-limited"),i.position().top+i.outerHeight()>f)return t;return!1},limitRow:function(t,i){function it(e){while(u<e)f={row:t,col:u},r=nt.getCellSegs(f,i),r.length&&(s=b[i-1][u],y=nt.renderMoreLink(f,r),c=n("<div/>").append(y),s.append(c),p.push(c[0])),u++}var nt=this,rt=this.view,e=this.rowStructs[t],p=[],u=0,f,w,b,k,l,o,r,d,a,s,tt,g,h,v,c,y;if(i&&i<e.segLevels.length){for(w=e.segLevels[i-1],b=e.cellMatrix,k=e.tbodyEl.children().slice(i).addClass("fc-limited").get(),l=0;l<w.length;l++){for(o=w[l],it(o.leftCol),a=[],d=0;u<=o.rightCol;)f={row:t,col:u},r=this.getCellSegs(f,i),a.push(r),d+=r.length,u++;if(d){for(s=b[i-1][o.leftCol],tt=s.attr("rowspan")||1,g=[],h=0;h<a.length;h++)v=n('<td class="fc-more-cell"/>').attr("rowspan",tt),r=a[h],f={row:t,col:o.leftCol+h},y=this.renderMoreLink(f,[o].concat(r)),c=n("<div/>").append(y),v.append(c),g.push(v[0]),p.push(v[0]);s.addClass("fc-limited").after(n(g));k.push(s[0])}}it(rt.colCnt);e.moreEls=n(p);e.limitedEls=n(k)}},unlimitRow:function(n){var t=this.rowStructs[n];t.moreEls&&(t.moreEls.remove(),t.moreEls=null);t.limitedEls&&(t.limitedEls.removeClass("fc-limited"),t.limitedEls=null)},renderMoreLink:function(t,i){var r=this,u=this.view;return n('<a class="fc-more"/>').text(this.getMoreLinkText(i.length)).on("click",function(f){var e=u.opt("eventLimitClick"),o=u.cellToDate(t),s=n(this),c=r.getCellDayEl(t),l=r.getCellSegs(t),h=r.resliceDaySegs(l,o),a=r.resliceDaySegs(i,o);typeof e=="function"&&(e=u.trigger("eventLimitClick",null,{date:o,dayEl:c,moreEl:s,segs:h,hiddenSegs:a},f));e==="popover"?r.showSegPopover(o,t,s,h):typeof e=="string"&&u.calendar.zoomTo(o,e)})},showSegPopover:function(n,t,i,r){var f=this,e=this.view,o=i.parent(),s,u;s=e.rowCnt==1?this.view.el:this.rowEls.eq(t.row);u={className:"fc-more-popover",content:this.renderSegPopoverContent(n,r),parentEl:this.el,top:s.offset().top,autoHide:!0,viewportConstrain:e.opt("popoverViewportConstrain"),hide:function(){f.segPopover.destroy();f.segPopover=null;f.popoverSegs=null}};e.opt("isRTL")?u.right=o.offset().left+o.outerWidth()+1:u.left=o.offset().left-1;this.segPopover=new tr(u);this.segPopover.show()},renderSegPopoverContent:function(t,i){var f=this.view,o=f.opt("theme"),s=t.format(f.opt("dayPopoverFormat")),e=n('<div class="fc-header '+f.widgetHeaderClass+'"><span class="fc-close '+(o?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"><\/span><span class="fc-title">'+r(s)+'<\/span><div class="fc-clear"/><\/div><div class="fc-body '+f.widgetContentClass+'"><div class="fc-event-container"><\/div><\/div>'),h=e.find(".fc-event-container"),u;for(i=this.renderSegs(i,!0),this.popoverSegs=i,u=0;u<i.length;u++)i[u].cellDate=t,h.append(i[u].el);return e},resliceDaySegs:function(t,i){var u=n.map(t,function(n){return n.event}),r=i.clone().stripTime(),f=r.clone().add(1,"days");return this.eventsToSegs(u,r,f)},getMoreLinkText:function(n){var i=this.view,t=i.opt("eventLimitText");return typeof t=="function"?t(n):"+"+n+" "+t},getCellSegs:function(n,t){for(var u=this.rowStructs[n.row].segMatrix,i=t||0,f=[],r;i<u.length;)r=u[i][n.col],r&&f.push(r),i++;return f}});it.prototype=f(o.prototype);n.extend(it.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,highlightEl:null,helperEl:null,render:function(){this.processOptions();this.el.html(this.renderHtml());this.dayEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.computeSlatTops();o.prototype.render.call(this)},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'<\/table><\/div><div class="fc-slats"><table>'+this.slatRowHtml()+"<\/table><\/div>"},slotBgCellHtml:function(n,t,i){return this.bgCellHtml(n,t,i)},slatRowHtml:function(){for(var n=this.view,h=n.calendar,o=n.opt("isRTL"),s="",c=this.slotDuration.asMinutes()%15==0,i=t.duration(+this.minTime),u,f,e;i<this.maxTime;)u=n.start.clone().time(i),f=u.minutes(),e='<td class="fc-axis fc-time '+n.widgetContentClass+'" '+n.axisStyleAttr()+">"+(!c||!f?"<span>"+r(h.formatDate(u,n.opt("axisFormat")))+"<\/span>":"")+"<\/td>",s+="<tr "+(f?'class="fc-minor"':"")+">"+(o?"":e)+'<td class="'+n.widgetContentClass+'"/>'+(o?e:"")+"<\/tr>",i.add(this.slotDuration);return s},processOptions:function(){var i=this.view,r=i.opt("slotDuration"),n=i.opt("snapDuration");r=t.duration(r);n=n?t.duration(n):r;this.slotDuration=r;this.snapDuration=n;this.cellDuration=n;this.minTime=t.duration(i.opt("minTime"));this.maxTime=t.duration(i.opt("maxTime"))},rangeToSegs:function(n,t){var f=this.view,e=[],r,i,u,o,s;for(n=n.clone().stripZone(),t=t.clone().stripZone(),i=0;i<f.colCnt;i++)u=f.cellToDate(0,i),o=u.clone().time(this.minTime),s=u.clone().time(this.maxTime),r=ci(n,t,o,s),r&&(r.col=i,e.push(r));return e},resize:function(){this.computeSlatTops();this.updateSegVerticals()},buildCoords:function(i,r){var h=this.view.colCnt,s=this.el.offset().top,e=t.duration(+this.minTime),u=null,o,f;for(this.dayEls.slice(0,h).each(function(t,i){o=n(i);f=o.offset().left;u&&(u[1]=f);u=[f];r[t]=u}),u[1]=f+o.outerWidth(),u=null;e<this.maxTime;)f=s+this.computeTimeTop(e),u&&(u[1]=f),u=[f],i.push(u),e.add(this.snapDuration);u[1]=s+this.computeTimeTop(e)},getCellDate:function(n){var t=this.view,i=t.calendar;return i.rezoneDate(t.cellToDate(0,n.col).time(this.minTime+this.snapDuration*n.row))},getCellDayEl:function(n){return this.dayEls.eq(n.col)},computeDateTop:function(n,i){return this.computeTimeTop(t.duration(n.clone().stripZone()-i.clone().stripTime()))},computeTimeTop:function(n){var t=(n-this.minTime)/this.slotDuration,i,u,r,f;return t=Math.max(0,t),t=Math.min(this.slatEls.length,t),i=Math.floor(t),u=t-i,r=this.slatTops[i],u?(f=this.slatTops[i+1],r+(f-r)*u):r},computeSlatTops:function(){var t=[],i;this.slatEls.each(function(r,u){i=n(u).position().top;t.push(i)});t.push(i+this.slatEls.last().outerHeight());this.slatTops=t},renderDrag:function(n,t,i){var r;if(i)return this.renderRangeHelper(n,t,i),r=this.view.opt("dragOpacity"),r!==undefined&&this.helperEl.css("opacity",r),!0;this.renderHighlight(n,t||this.view.calendar.getDefaultEventEnd(!1,n))},destroyDrag:function(){this.destroyHelper();this.destroyHighlight()},renderResize:function(n,t,i){this.renderRangeHelper(n,t,i)},destroyResize:function(){this.destroyHelper()},renderHelper:function(t,i){for(var e=this.renderEventTable([t]),s=e.tableEl,o=e.segs,f,r,u=0;u<o.length;u++)f=o[u],i&&i.col===f.col&&(r=i.el,f.el.css({left:r.css("left"),right:r.css("right"),"margin-left":r.css("margin-left"),"margin-right":r.css("margin-right")}));this.helperEl=n('<div class="fc-helper-skeleton"/>').append(s).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(n,t){this.view.opt("selectHelper")?this.renderRangeHelper(n,t):this.renderHighlight(n,t)},destroySelection:function(){this.destroyHelper();this.destroyHighlight()},renderHighlight:function(t,i){this.highlightEl=n(this.highlightSkeletonHtml(t,i)).appendTo(this.el)},destroyHighlight:function(){this.highlightEl&&(this.highlightEl.remove(),this.highlightEl=null)},highlightSkeletonHtml:function(n,t){for(var e=this.view,s=this.rangeToSegs(n,t),r="",i=0,u,o,h,c,f=0;f<s.length;f++)u=s[f],i<u.col&&(r+='<td colspan="'+(u.col-i)+'"/>',i=u.col),o=e.cellToDate(0,i),h=this.computeDateTop(u.start,o),c=this.computeDateTop(u.end,o),r+='<td><div class="fc-highlight-container"><div class="fc-highlight" style="top:'+h+"px;bottom:-"+c+'px"/><\/div><\/td>',i++;return i<e.colCnt&&(r+='<td colspan="'+(e.colCnt-i)+'"/>'),r=this.bookendCells(r,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+r+"<\/tr><\/table><\/div>"}});n.extend(it.prototype,{segs:null,eventSkeletonEl:null,renderEvents:function(t){var i=this.renderEventTable(t);this.eventSkeletonEl=n('<div class="fc-content-skeleton"/>').append(i.tableEl);this.el.append(this.eventSkeletonEl);this.segs=i.segs},getSegs:function(){return this.segs||[]},destroyEvents:function(){o.prototype.destroyEvents.call(this);this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null);this.segs=null},renderEventTable:function(t){var h=n("<table><tr/><\/table>"),c=h.find("tr"),r=this.eventsToSegs(t),o,u,i,f,e,s;for(r=this.renderSegs(r),o=this.groupSegCols(r),this.computeSegVerticals(r),f=0;f<o.length;f++){for(e=o[f],nu(e),s=n('<div class="fc-event-container"/>'),u=0;u<e.length;u++)i=e[u],i.el.css(this.generateSegPositionCss(i)),i.bottom-i.top<30&&i.el.addClass("fc-short"),s.append(i.el);c.append(n("<td/>").append(s))}return this.bookendCells(c,"eventSkeleton"),{tableEl:h,segs:r}},updateSegVerticals:function(){var n=this.segs,t;if(n)for(this.computeSegVerticals(n),t=0;t<n.length;t++)n[t].el.css(this.generateSegVerticalCss(n[t]))},computeSegVerticals:function(n){for(var t,i=0;i<n.length;i++)t=n[i],t.top=this.computeDateTop(t.start,t.start),t.bottom=this.computeDateTop(t.end,t.start)},renderSegHtml:function(n,t){var u=this.view,i=n.event,l=u.isEventDraggable(i),s=!t&&n.isEnd&&u.isEventResizable(i),h=this.getSegClasses(n,l,s),c=this.getEventSkinCss(i),f,e,o;return h.unshift("fc-time-grid-event"),u.isMultiDayEvent(i)?(n.isStart||n.isEnd)&&(f=u.getEventTimeText(n.start,n.end),e=u.getEventTimeText(n.start,n.end,"LT"),o=u.getEventTimeText(n.start,null)):(f=u.getEventTimeText(i),e=u.getEventTimeText(i,"LT"),o=u.getEventTimeText(i.start,null)),'<a class="'+h.join(" ")+'"'+(i.url?' href="'+r(i.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(f?'<div class="fc-time" data-start="'+r(o)+'" data-full="'+r(e)+'"><span>'+r(f)+"<\/span><\/div>":"")+(i.title?'<div class="fc-title">'+r(i.title)+"<\/div>":"")+'<\/div><div class="fc-bg"/>'+(s?'<div class="fc-resizer"/>':"")+"<\/a>"},generateSegPositionCss:function(n){var e=this.view,o=e.opt("isRTL"),s=e.opt("slotEventOverlap"),i=n.backwardCoord,r=n.forwardCoord,t=this.generateSegVerticalCss(n),u,f;return s&&(r=Math.min(1,i+(r-i)*2)),o?(u=1-r,f=i):(u=i,f=1-r),t.zIndex=n.level+1,t.left=u*100+"%",t.right=f*100+"%",s&&n.forwardPressure&&(t[o?"marginLeft":"marginRight"]=20),t},generateSegVerticalCss:function(n){return{top:n.top,bottom:-n.bottom}},groupSegCols:function(n){for(var r=this.view,i=[],t=0;t<r.colCnt;t++)i.push([]);for(t=0;t<n.length;t++)i[n[t].col].push(n[t]);return i}});e.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var t=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=t+"-widget-header";this.widgetContentClass=t+"-widget-content";this.highlightStateClass=t+"-state-highlight";this.documentMousedownProxy=n.proxy(this,"documentMousedown");this.documentDragStartProxy=n.proxy(this,"documentDragStart")},render:function(){this.updateSize();this.trigger("viewRender",this,this,this.el);n(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect();this.trigger("viewDestroy",this,this,this.el);this.destroyEvents();this.el.empty();n(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(){},updateSize:function(n){n&&this.recordScroll();this.updateHeight();this.updateWidth()},updateWidth:function(){},updateHeight:function(){var n=this.calendar;this.setHeight(n.getSuggestedViewHeight(),n.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(n){var t=this.el.add(this.scrollerEl),i;return t.css({position:"relative",left:-1}),i=this.el.outerHeight()-this.scrollerEl.height(),t.css({position:"",left:""}),n-i},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){this.scrollTop!==null&&this.scrollerEl.scrollTop(this.scrollTop)},renderEvents:function(){this.segEach(function(n){this.trigger("eventAfterRender",n.event,n.event,n.el)});this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(n){this.trigger("eventDestroy",n.event,n.event,n.el)})},resolveEventEl:function(t,i){var r=this.trigger("eventRender",t,t,i);return r===!1?i=null:r&&r!==!0&&(i=n(r)),i},showEvent:function(n){this.segEach(function(n){n.el.css("visibility","")},n)},hideEvent:function(n){this.segEach(function(n){n.el.css("visibility","hidden")},n)},segEach:function(n,t){for(var r=this.getSegs(),i=0;i<r.length;i++)t&&r[i].event._id!==t._id||n.call(this,r[i])},getSegs:function(){},renderDrag:function(){},destroyDrag:function(){},documentDragStart:function(t){var i=this,r=null,u;if(this.opt("droppable")){u=new d(this.coordMap,{cellOver:function(n,t){r=t;i.renderDrag(t)},cellOut:function(){r=null;i.destroyDrag()}});n(document).one("dragstop",function(n,t){i.destroyDrag();r&&i.trigger("drop",n.target,r,n,t)});u.startDrag(t)}},select:function(n,t,i){this.unselect(i);this.renderSelection(n,t);this.reportSelection(n,t,i)},renderSelection:function(){},reportSelection:function(n,t,i){this.isSelected=!0;this.trigger("select",null,n,t,i)},unselect:function(n){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,n))},destroySelection:function(){},documentMousedown:function(t){var i;this.isSelected&&this.opt("unselectAuto")&&hi(t)&&(i=this.opt("unselectCancel"),i&&n(t.target).closest(i).length||this.unselect(t))}};s.prototype=f(e.prototype);n.extend(s.prototype,{dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,render:function(n,t,i){this.rowCnt=n;this.colCnt=t;this.dayNumbersVisible=i;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderHtml());this.headRowEl=this.el.find("thead .fc-row");this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.coordMap.containerEl=this.scrollerEl;this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render(this.hasRigidRows());e.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy();e.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'<\/td><\/tr><\/thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/><\/div><\/td><\/tr><\/tbody><\/table>'},headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+r(this.opt("weekNumberTitle"))+"<\/span><\/th>"},numberIntroHtml:function(n){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.cellToDate(n,0))+"<\/span><\/td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"><\/td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><\/td>"},numberCellHtml:function(n,t,i){var r;return this.dayNumbersVisible?(r=this.dayGrid.getDayClasses(i),r.unshift("fc-day-number"),'<td class="'+r.join(" ")+'" data-date="'+i.format()+'">'+i.date()+"<\/td>"):"<td/>"},weekNumberStyleAttr:function(){return this.weekNumberWidth!==null?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var n=this.opt("eventLimit");return n&&typeof n!="number"},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=fi(this.el.find(".fc-week-number")))},setHeight:function(n,t){var i=this.opt("eventLimit"),r;ut(this.scrollerEl);ii(this.headRowEl);this.dayGrid.destroySegPopover();i&&typeof i=="number"&&this.dayGrid.limitRows(i);r=this.computeScrollerHeight(n);this.setGridHeight(r,t);i&&typeof i!="number"&&this.dayGrid.limitRows(i);!t&&ei(this.scrollerEl,r)&&(ti(this.headRowEl,si(this.scrollerEl)),r=this.computeScrollerHeight(n),this.scrollerEl.height(r),this.restoreScroll())},setGridHeight:function(n,t){t?ui(this.dayGrid.rowEls):ri(this.dayGrid.rowEls,n,!0)},renderEvents:function(n){this.dayGrid.renderEvents(n);this.updateHeight();e.prototype.renderEvents.call(this,n)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){e.prototype.destroyEvents.call(this);this.recordScroll();this.dayGrid.destroyEvents()},renderDrag:function(n,t,i){return this.dayGrid.renderDrag(n,t,i)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(n,t){this.dayGrid.renderSelection(n,t)},destroySelection:function(){this.dayGrid.destroySelection()}});kt({fixedWeekCount:!0});l.month=vt;vt.prototype=f(s.prototype);n.extend(vt.prototype,{name:"month",incrementDate:function(n,t){return n.clone().stripTime().add(t,"months").startOf("month")},render:function(n){var t;this.intervalStart=n.clone().stripTime().startOf("month");this.intervalEnd=this.intervalStart.clone().add(1,"months");this.start=this.intervalStart.clone();this.start=this.skipHiddenDays(this.start);this.start.startOf("week");this.start=this.skipHiddenDays(this.start);this.end=this.intervalEnd.clone();this.end=this.skipHiddenDays(this.end,-1,!0);this.end.add((7-this.end.weekday())%7,"days");this.end=this.skipHiddenDays(this.end,-1,!0);t=Math.ceil(this.end.diff(this.start,"weeks",!0));this.isFixedWeeks()&&(this.end.add(6-t,"weeks"),t=6);this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat"));s.prototype.render.call(this,t,this.getCellsPerWeek(),!0)},setGridHeight:function(n,t){t=t||this.opt("weekMode")==="variable";t&&(n*=this.rowCnt/6);ri(this.dayGrid.rowEls,n,!t)},isFixedWeeks:function(){var n=this.opt("weekMode");return n?n==="fixed":this.opt("fixedWeekCount")}});l.basicWeek=yt;yt.prototype=f(s.prototype);n.extend(yt.prototype,{name:"basicWeek",incrementDate:function(n,t){return n.clone().stripTime().add(t,"weeks").startOf("week")},render:function(n){this.intervalStart=n.clone().stripTime().startOf("week");this.intervalEnd=this.intervalStart.clone().add(1,"weeks");this.start=this.skipHiddenDays(this.intervalStart);this.end=this.skipHiddenDays(this.intervalEnd,-1,!0);this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat"),"  ");s.prototype.render.call(this,1,this.getCellsPerWeek(),!1)}});l.basicDay=pt;pt.prototype=f(s.prototype);n.extend(pt.prototype,{name:"basicDay",incrementDate:function(n,t){var i=n.clone().stripTime().add(t,"days");return this.skipHiddenDays(i,t<0?-1:1)},render:function(n){this.start=this.intervalStart=n.clone().stripTime();this.end=this.intervalEnd=this.start.clone().add(1,"days");this.title=this.calendar.formatDate(this.start,this.opt("titleFormat"));s.prototype.render.call(this,1,1,!1)}});kt({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:fu,timeFormat:{agenda:eu},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});or=5;a.prototype=f(e.prototype);n.extend(a.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(t){this.rowCnt=1;this.colCnt=t;this.el.addClass("fc-agenda-view").html(this.renderHtml());this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.coordMap.containerEl=this.scrollerEl;this.timeGrid.el=this.el.find(".fc-time-grid");this.timeGrid.render();this.bottomRuleEl=n('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight());this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)");e.prototype.render.call(this);this.resetScroll()},destroy:function(){this.timeGrid.destroy();this.dayGrid&&this.dayGrid.destroy();e.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'<\/td><\/tr><\/thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/><\/div><\/td><\/tr><\/tbody><\/table>'},headIntroHtml:function(){var i,n,t,u;return this.opt("weekNumbers")?(i=this.cellToDate(0,0),n=this.calendar.calculateWeekNumber(i),t=this.opt("weekNumberTitle"),u=this.opt("isRTL")?n+t:t+n,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+r(u)+"<\/span><\/th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><\/th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||r(this.opt("allDayText")))+"<\/span><\/td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><\/td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"><\/td>"},axisStyleAttr:function(){return this.axisWidth!==null?'style="width:'+this.axisWidth+'px"':""},updateSize:function(n){n&&this.timeGrid.resize();e.prototype.updateSize.call(this,n)},updateWidth:function(){this.axisWidth=fi(this.el.find(".fc-axis"))},setHeight:function(n,t){var i,r;this.bottomRuleHeight===null&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight());this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");ut(this.scrollerEl);ii(this.noScrollRowEls);this.dayGrid&&(this.dayGrid.destroySegPopover(),i=this.opt("eventLimit"),i&&typeof i!="number"&&(i=or),i&&this.dayGrid.limitRows(i));t||(r=this.computeScrollerHeight(n),ei(this.scrollerEl,r)?(ti(this.noScrollRowEls,si(this.scrollerEl)),r=this.computeScrollerHeight(n),this.scrollerEl.height(r),this.restoreScroll()):(this.scrollerEl.height(r).css("overflow","hidden"),this.bottomRuleEl.show()))},resetScroll:function(){function i(){r.scrollerEl.scrollTop(n)}var r=this,u=t.duration(this.opt("scrollTime")),n=this.timeGrid.computeTimeTop(u);n=Math.ceil(n);n&&n++;i();setTimeout(i,0)},renderEvents:function(n){for(var i=[],r=[],u=[],f,t=0;t<n.length;t++)n[t].allDay?i.push(n[t]):r.push(n[t]);f=this.timeGrid.renderEvents(r);this.dayGrid&&(u=this.dayGrid.renderEvents(i));this.updateHeight();e.prototype.renderEvents.call(this,n)},getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){e.prototype.destroyEvents.call(this);this.recordScroll();this.timeGrid.destroyEvents();this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(n,t,i){return n.hasTime()?this.timeGrid.renderDrag(n,t,i):this.dayGrid?this.dayGrid.renderDrag(n,t,i):void 0},destroyDrag:function(){this.timeGrid.destroyDrag();this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(n,t){n.hasTime()||t.hasTime()?this.timeGrid.renderSelection(n,t):this.dayGrid&&this.dayGrid.renderSelection(n,t)},destroySelection:function(){this.timeGrid.destroySelection();this.dayGrid&&this.dayGrid.destroySelection()}});l.agendaWeek=wt;wt.prototype=f(a.prototype);n.extend(wt.prototype,{name:"agendaWeek",incrementDate:function(n,t){return n.clone().stripTime().add(t,"weeks").startOf("week")},render:function(n){this.intervalStart=n.clone().stripTime().startOf("week");this.intervalEnd=this.intervalStart.clone().add(1,"weeks");this.start=this.skipHiddenDays(this.intervalStart);this.end=this.skipHiddenDays(this.intervalEnd,-1,!0);this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat"),"  ");a.prototype.render.call(this,this.getCellsPerWeek())}});l.agendaDay=bt;bt.prototype=f(a.prototype);n.extend(bt.prototype,{name:"agendaDay",incrementDate:function(n,t){var i=n.clone().stripTime().add(t,"days");return this.skipHiddenDays(i,t<0?-1:1)},render:function(n){this.start=this.intervalStart=n.clone().stripTime();this.end=this.intervalEnd=this.start.clone().add(1,"days");this.title=this.calendar.formatDate(this.start,this.opt("titleFormat"));a.prototype.render.call(this,1)}})});